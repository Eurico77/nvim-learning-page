<!DOCTYPE html>
<html lang="pt-BR" class="">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guia Interativo de Atalhos Neovim</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    .active-filter {
      background-color: #52525b;
      /* zinc-600 */
      color: #ffffff;
    }

    html.dark .active-filter {
      background-color: #d4d4d8;
      /* zinc-300 */
      color: #18181b;
      /* zinc-900 */
    }

    .command-highlight {
      background-color: #fef3c7;
      /* amber-100 */
      border-radius: 3px;
      padding: 0 2px;
    }

    html.dark .command-highlight {
      background-color: #78350f;
      /* amber-900 */
    }
  </style>
</head>

<body class="bg-stone-100 dark:bg-zinc-900 text-stone-800 dark:text-stone-200 transition-colors duration-300">

  <div class="container mx-auto p-4 md:p-8 max-w-5xl">
    <header class="text-center mb-8 relative">
      <h1 class="text-3xl md:text-4xl font-bold text-zinc-800 dark:text-zinc-100">Guia Interativo de Atalhos Neovim</h1>
      <p class="text-stone-600 dark:text-stone-400 mt-2">Seu documento vivo para dominar o Neovim. Filtre por modo ou
        pesquise para encontrar comandos.</p>
      <button id="theme-toggle"
        class="absolute top-0 right-0 p-2 rounded-full text-stone-600 dark:text-stone-300 hover:bg-stone-200 dark:hover:bg-zinc-700 transition-colors">
        <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
        </svg>
        <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" class="w-6 h-6 hidden">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
        </svg>
      </button>
    </header>

    <div class="sticky top-0 bg-stone-100/80 dark:bg-zinc-900/80 backdrop-blur-sm py-4 z-10 mb-8">
      <div class="flex flex-col md:flex-row gap-4">
        <div class="relative flex-grow">
          <input type="text" id="searchInput" placeholder="Pesquisar comando ou descrição..."
            class="w-full p-3 pl-10 border border-stone-300 dark:border-zinc-600 rounded-lg focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 transition bg-white dark:bg-zinc-800 text-stone-800 dark:text-stone-200">
          <svg class="w-5 h-5 text-stone-400 absolute top-1/2 left-3 -translate-y-1/2"
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
          </svg>
        </div>
        <nav id="filter-nav" class="flex flex-wrap gap-2 justify-center">
          <button data-mode="all"
            class="filter-btn py-2 px-4 rounded-lg font-semibold transition-colors duration-200 bg-white dark:bg-zinc-800 shadow-sm hover:bg-stone-200 dark:hover:bg-zinc-700 active-filter">Todos</button>
          <button data-mode="normal"
            class="filter-btn py-2 px-4 rounded-lg font-semibold transition-colors duration-200 bg-white dark:bg-zinc-800 shadow-sm hover:bg-stone-200 dark:hover:bg-zinc-700">Normal</button>
          <button data-mode="insert"
            class="filter-btn py-2 px-4 rounded-lg font-semibold transition-colors duration-200 bg-white dark:bg-zinc-800 shadow-sm hover:bg-stone-200 dark:hover:bg-zinc-700">Inserção</button>
          <button data-mode="visual"
            class="filter-btn py-2 px-4 rounded-lg font-semibold transition-colors duration-200 bg-white dark:bg-zinc-800 shadow-sm hover:bg-stone-200 dark:hover:bg-zinc-700">Visual</button>
          <button data-mode="plugins"
            class="filter-btn py-2 px-4 rounded-lg font-semibold transition-colors duration-200 bg-white dark:bg-zinc-800 shadow-sm hover:bg-stone-200 dark:hover:bg-zinc-700">Plugins</button>
        </nav>
      </div>
    </div>

    <main id="commands-container" class="space-y-6">
    </main>

    <div id="no-results" class="text-center py-12 hidden">
      <h3 class="text-xl font-semibold text-stone-700 dark:text-stone-300">Nenhum comando encontrado</h3>
      <p class="text-stone-500 dark:text-stone-400 mt-2">Tente ajustar sua busca ou o filtro de modo.</p>
    </div>

  </div>

  <script>
    const commandsData = [
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`h`, `j`, `k`, `l`', description: 'Move o cursor para esquerda, baixo, cima e direita.', example: 'Use `j` para descer uma linha ou `10j` para descer 10 linhas de uma vez. O mesmo vale para `h`, `k`, `l`.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`w`', description: '**(word)** Avança o cursor para o início da próxima palavra.', example: 'Em uma linha com `const nome = "valor"`, posicione o cursor no início. Pressione `w` 3 vezes para pular para `"valor"`. Use `b` para voltar palavra por palavra.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`b`', description: '**(backward)** Volta o cursor para o início da palavra anterior.', example: 'Se você avançou com `w` e passou do ponto, pressione `b` para retornar à palavra anterior sem precisar usar as setas.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`e`', description: '**(end)** Move o cursor para o final da palavra atual.', example: 'Para adicionar algo no final de uma palavra, use `e` para posicionar o cursor e `a` para entrar no modo de inserção.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`0`', description: 'Move o cursor para o início da linha (coluna 0).', example: 'Use `0` para ir ao início absoluto da linha, mesmo que haja espaços ou tabulações.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`^`', description: 'Move para o primeiro caractere não branco da linha.', example: 'Em uma linha indentada, `^` leva o cursor para o início do código, ignorando a indentação.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`$`', description: 'Move o cursor para o final da linha.', example: 'Para adicionar um ponto e vírgula no final da linha, use `$` seguido de `a` e digite `;`.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`gg`', description: '**(go)** Vai para o início do arquivo.', example: 'Precisa adicionar um `import` no topo do arquivo? Pressione `gg` para ir instantaneamente para a primeira linha.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`G`', description: '**(Go)** Vai para o final do arquivo.', example: 'Para verificar o final de um arquivo de log ou adicionar algo na última linha, use `G`.'},
      {mode: 'normal', context: 'Movimentação (Cursor)', command: '`50G`', description: 'Vai para a linha 50.', example: 'Se um erro aponta para a linha 123, digite `123G` para pular diretamente para ela.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`i`', description: '**(insert)** Entra no Modo de Inserção antes do cursor.', example: 'Posicione o cursor onde quer começar a digitar e pressione `i`.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`a`', description: '**(append)** Entra no Modo de Inserção depois do cursor.', example: 'Para adicionar um caractere no final de uma palavra, posicione o cursor no último caractere e pressione `a`.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`o`', description: '**(open)** Cria uma nova linha abaixo e entra em Modo de Inserção.', example: 'É a forma mais rápida de adicionar uma nova linha de código abaixo da atual.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`O`', description: 'Cria uma nova linha acima e entra em Modo de Inserção.', example: 'Útil para adicionar uma linha de comentário ou uma declaração de variável acima da linha atual.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`dd`', description: 'Deleta a linha inteira.', example: 'Para remover uma linha de código temporária ou um comentário, posicione o cursor em qualquer lugar da linha e pressione `dd`. A linha será recortada (você pode colá-la com `p`).'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`dw`', description: '**(delete word)** Deleta da posição do cursor até o final da palavra.', example: 'Em `const nomeVariavel = 1;`, se o cursor estiver no `n` de `nomeVariavel`, `dw` deletará a palavra inteira.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`cw`', description: '**(change word)** Deleta a palavra e entra em Modo de Inserção.', example: 'Para renomear uma variável rapidamente, coloque o cursor sobre ela, digite `cw`, escreva o novo nome e pressione `Esc`.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`cc`', description: '**(change line)** Deleta a linha inteira e entra em Modo de Inserção.', example: 'Use `cc` para reescrever uma linha inteira do zero.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`yy`', description: 'Copia a linha inteira.', example: 'Para duplicar uma linha, pressione `yy` para copiá-la e `p` para colá-la na linha de baixo.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`p`', description: '**(put)** Cola o conteúdo copiado/recortado depois do cursor.', example: 'Após usar `dd` ou `yy`, mova o cursor para o local desejado e use `p` para colar.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`x`', description: 'Deleta o caractere sob o cursor.', example: 'Equivalente a pressionar "Delete", mas sem sair do Modo Normal.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`.`', description: 'Repete o último comando de alteração.', example: 'Se você alterou uma palavra com `cw`, pode ir para outra palavra e pressionar `.` para aplicar a mesma alteração.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`u`', description: '**(undo)** Desfaz a última ação.', example: 'Deletou uma linha com `dd` por engano? Pressione `u` para trazê-la de volta.'},
      {mode: 'normal', context: 'Edição (Ações)', command: '`Ctrl + r`', description: '**(redo)** Refaz a última ação desfeita.', example: 'Se você desfez algo com `u` mas se arrependeu, `Ctrl + r` refaz a ação.'},
      {mode: 'normal', context: 'Busca e Substituição', command: '`/texto`', description: 'Inicia uma busca para frente por "texto".', example: 'Digite `/useState` e pressione Enter para encontrar a próxima ocorrência do hook no seu componente React.'},
      {mode: 'normal', context: 'Busca e Substituição', command: '`n`', description: '**(next)** Pula para a próxima ocorrência da busca.', example: 'Após buscar por uma palavra, continue pressionando `n` para navegar por todas as ocorrências.'},
      {mode: 'normal', context: 'Busca e Substituição', command: '`*`', description: 'Busca pela palavra que está sob o cursor.', example: 'Coloque o cursor sobre o nome de uma função e pressione `*` para destacar todas as suas ocorrências no arquivo. Use `n` para pular para a próxima.'},
      {mode: 'insert', context: 'Sair do Modo', command: '`Esc` ou `Ctrl + [`', description: 'Volta para o Modo Normal.', example: 'Após terminar de digitar, pressione `Esc` para retornar ao modo de comandos e poder navegar ou executar outras ações.'},
      {mode: 'visual', context: 'Entrada no Modo', command: '`v`', description: 'Entra no Modo Visual (seleção por caractere).', example: 'Pressione `v`, use `w` ou `l` para selecionar um trecho de texto e depois `y` para copiá-lo.'},
      {mode: 'visual', context: 'Entrada no Modo', command: '`V`', description: 'Entra no Modo Visual de Linha (seleção por linhas inteiras).', example: 'Pressione `V`, depois `j` algumas vezes para selecionar várias linhas e `d` para deletá-las de uma vez.'},
      {mode: 'visual', context: 'Ações na Seleção', command: '`>`', description: 'Aumenta a indentação do bloco selecionado.', example: 'Selecione um bloco de código com `V` e `j`/`k`, depois pressione `>` para indentá-lo.'},
      {mode: 'visual', context: 'Ações na Seleção', command: '`<`', description: 'Diminui a indentação do bloco selecionado.', example: 'Se um bloco de código está indentado demais, selecione-o e pressione `<` para corrigir.'},
      {mode: 'plugins', context: 'nvim-surround', command: '`cs"\'`', description: '**(change surrounding)** Muda as aspas duplas para aspas simples.', example: 'Em um texto como `"Olá, mundo"`, coloque o cursor dentro das aspas e digite `cs"\'` para transformá-lo em `\'Olá, mundo\'`.'},
      {mode: 'plugins', context: 'nvim-surround', command: '`ysiw)`', description: '**(you surround inside word)** Envolve a palavra atual com parênteses.', example: 'Na palavra `variavel`, posicione o cursor sobre ela e digite `ysiw)` para transformá-la em `(variavel)`.'}
    ];

    const commandsContainer = document.getElementById('commands-container');
    const searchInput = document.getElementById('searchInput');
    const filterNav = document.getElementById('filter-nav');
    const noResults = document.getElementById('no-results');
    const themeToggle = document.getElementById('theme-toggle');
    const sunIcon = document.getElementById('theme-icon-sun');
    const moonIcon = document.getElementById('theme-icon-moon');

    let currentMode = 'all';
    let currentSearch = '';

    const updateThemeIcons = (isDark) => {
      if (isDark) {
        sunIcon.classList.add('hidden');
        moonIcon.classList.remove('hidden');
      } else {
        sunIcon.classList.remove('hidden');
        moonIcon.classList.add('hidden');
      }
    };

    const renderCommands = () => {
      const groupedCommands = commandsData.reduce((acc, cmd) => {
        const key = `${cmd.mode}-${cmd.context}`;
        if (!acc[key]) {
          acc[key] = {
            mode: cmd.mode,
            context: cmd.context,
            commands: []
          };
        }
        acc[key].commands.push(cmd);
        return acc;
      }, {});

      const filteredGroups = Object.values(groupedCommands).filter(group => {
        const modeMatch = currentMode === 'all' || group.mode === currentMode;
        if (!modeMatch) return false;

        if (currentSearch) {
          group.filteredCommands = group.commands.filter(cmd =>
            cmd.command.toLowerCase().includes(currentSearch) ||
            cmd.description.toLowerCase().includes(currentSearch) ||
            (cmd.example && cmd.example.toLowerCase().includes(currentSearch))
          );
          return group.filteredCommands.length > 0;
        } else {
          group.filteredCommands = group.commands;
          return true;
        }
      });

      commandsContainer.innerHTML = '';

      if (filteredGroups.length === 0) {
        noResults.classList.remove('hidden');
      } else {
        noResults.classList.add('hidden');
      }

      filteredGroups.sort((a, b) => a.context.localeCompare(b.context)).forEach(group => {
        const card = document.createElement('div');
        card.className = 'bg-white dark:bg-zinc-800 rounded-xl shadow-lg p-6 flex flex-col transition-colors duration-300';

        const commandsHTML = group.filteredCommands.map(cmd => {
          let commandText = cmd.command.replace(/</g, '&lt;').replace(/>/g, '&gt;');
          let descriptionText = cmd.description.replace(/</g, '&lt;').replace(/>/g, '&gt;');
          let exampleText = cmd.example ? cmd.example.replace(/</g, '&lt;').replace(/>/g, '&gt;') : '';

          if (currentSearch) {
            const regex = new RegExp(`(${currentSearch.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
            commandText = commandText.replace(regex, `<span class="command-highlight">$1</span>`);
            descriptionText = descriptionText.replace(regex, `<span class="command-highlight">$1</span>`);
            if (exampleText) exampleText = exampleText.replace(regex, `<span class="command-highlight">$1</span>`);
          }

          const exampleHTML = cmd.example ? `
                        <div class="mt-3 pt-3 border-t border-stone-200 dark:border-zinc-700">
                            <p class="text-sm text-stone-600 dark:text-stone-400">
                                <span class="font-semibold text-stone-700 dark:text-stone-300">Exemplo:</span> ${exampleText}
                            </p>
                        </div>
                    ` : '';

          return `
                        <div class="py-4 border-b border-stone-200 dark:border-zinc-700 last:border-b-0">
                            <div class="flex flex-col sm:flex-row sm:items-start">
                                <code class="font-mono text-sm text-zinc-700 dark:text-zinc-200 bg-zinc-100 dark:bg-zinc-700 py-1 px-2 rounded-md w-full sm:w-48 shrink-0 mb-2 sm:mb-0">${commandText}</code>
                                <p class="text-stone-700 dark:text-stone-300 text-sm sm:ml-4">${descriptionText}</p>
                            </div>
                            ${exampleHTML}
                        </div>
                    `;
        }).join('');

        card.innerHTML = `
                    <h2 class="text-xl font-semibold mb-2 text-zinc-800 dark:text-zinc-100">${group.context}</h2>
                    <div class="flex-grow">
                        ${commandsHTML}
                    </div>
                `;
        commandsContainer.appendChild(card);
      });
    };

    filterNav.addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-btn')) {
        currentMode = e.target.dataset.mode;
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active-filter'));
        e.target.classList.add('active-filter');
        renderCommands();
      }
    });

    searchInput.addEventListener('input', (e) => {
      currentSearch = e.target.value.toLowerCase();
      renderCommands();
    });

    themeToggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateThemeIcons(isDark);
    });

    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        document.documentElement.classList.add('dark');
        updateThemeIcons(true);
      } else {
        updateThemeIcons(false);
      }
      renderCommands();
    });
  </script>
</body>

</html>
